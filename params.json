{"name":"XP-JS","body":"XP to JS compiler / XP JS microkernel\r\n=====================================\r\nThis experiment tries to see whether the [XP Framework ](http://github.com/xp-framework)\r\ncould be based on JavaScript runtimes in the future. Paired with the XP compiler, its \r\nPHP language parser and the generator to emit JavaScript, and maybe together with \r\nporting some of PHP's string and array functions, we would be able to exchange the \r\nPHP platform we currently depend on for something else.\r\n\r\nSee also:\r\n\r\n* http://news.planet-xp.net/article/452/2012/03/21/\r\n* http://news.planet-xp.net/article/451/2012/03/11/\r\n* http://news.planet-xp.net/article/449/2012/02/26/\r\n\r\nDemo class\r\n----------\r\n\r\n```javascript\r\n// {{{ Hello\r\nHello = define('Hello', 'lang.Object', function Hello () { });\r\n\r\nHello.main = function Hello$main(args) {\r\n  if (args.length < 1) {\r\n    throw new lang.IllegalArgumentException('Argument required');\r\n  }\r\n  util.cmd.Console.writeLine('Hello ', args[0]);\r\n}\r\n// }}}\r\n\r\n```\r\n\r\n\r\nNodeJS\r\n------\r\nNode.JS is the V8-based JavaScript engine which is becoming increasingly\r\npopular. Even with its pre-1.0 status, sites such as GitHub use it in \r\nproduction.\r\nSee http://nodejs.org/\r\n\r\n**Getting started**\r\n\r\n```sh\r\n$ node tools/node.js Hello \"World\"\r\nHello World\r\n```\r\n\r\n```sh\r\n$ node tools/node.js Hello\r\n*** Uncaught exception lang.IllegalArgumentException(Argument required)\r\n  at IllegalArgumentException(\"Argument required\") [line 5 of IllegalArgumentException.js]\r\n  at Hello.main(array[0]) [line 6 of Hello.js]\r\n  at Method.invoke(null, array[1]) [line 26 of Method.js]\r\n  at __main() [line 194 of node.js]\r\n```\r\n\r\n\r\nSetting up the compiler\r\n-----------------------\r\nYou need the branch \"node\" of my xp-language fork checked out:\r\n\r\n```sh\r\n$ git clone -b node git://github.com/thekid/xp-language.git xp.node\r\nCloning into xp.node...\r\n[...]\r\n```\r\n\r\nThen, you need to add this to the `use` line in your **xp.ini** file. *This\r\nfile will usually be in ~/.xp/xp.ini or ~/bin/xp.ini.* Add the path to the\r\n\"compiler\" subdirectory of the \"xp.node\" directory from above to the end\r\nof this line, prefixed by the platform's path separator character. For \r\nexample, this will work on Un*x platforms (in Windows, use semicolons):\r\n\r\n```diff\r\n-use=~/devel/xp/core:~/devel/xp/tools\r\n+use=~/devel/xp/core:~/devel/xp/tools:~/devel/xp.node/compiler\r\n```\r\n\r\nYou're all set to go.\r\n\r\n\r\nCompiling\r\n---------\r\nTo compile classes from XP language to XP JS, simply invoke the **xcc** \r\ncommand as follows:\r\n\r\n```sh\r\n$ xcc -e node Hello.xp\r\n[.]\r\nDone: 1/1 compiled, 0 failed\r\n```\r\n\r\nThen, run it as seen above.\r\n\r\n\r\nClass path\r\n----------\r\nFor a start just put all the classes in the current directory. Later on,\r\nwhen you want to start sorting stuff out, you can place compiled classes \r\nanywhere in the class path. The class path is compiled from the paths \r\nlisted in the `.pth` files (as with the XP Framework). To get an overview \r\nof all currently registered class paths, execute the entry point without \r\narguments:\r\n\r\n```sh\r\n$ node tools/node.js\r\nXP JS Microkernel 0.9.1 { Node 0.6.14 & V8 3.6.6.24 } @ Windows_NT 6.1.7600 (ia32)\r\nCopyright (c) 2011-2012 the XP group\r\nlang.FileSystemClassLoader<C:\\cygwin\\home\\friebe\\devel\\xp-js\\core\\src\\main\\js>\r\nlang.FileSystemClassLoader<C:\\cygwin\\home\\friebe\\devel\\xp-js\\test\\src\\main\\js>\r\nlang.archive.ArchiveClassLoader<C:\\cygwin\\home\\friebe\\devel\\xp-js\\lib\\tools.xar>\r\nlang.FileSystemClassLoader<C:\\cygwin\\home\\friebe\\devel\\xp-js>\r\n```\r\n\r\n\r\nTesting\r\n-------\r\nThe classes provided in the microkernel are tested by unittests in the\r\ndirectory with the same name. To run these tests, invoke the following\r\ncommand:\r\n\r\n```sh\r\n$ node tools/node.js Unittest unittests.*\r\n[........................................................................\r\n.......................................]\r\n\r\nOK: 111 run, 111 succeeded, 0 failed\r\nMemory used: 12728 kB\r\nTime taken: 0.016 sec(s)\r\n```\r\n\r\nThe tests are written in XP language. Any changes made to the `*.xp`\r\nfiles need to be recompiled to JavaScript before executing. This can be \r\naccomplished by running `xcc -e node unittests/*.xp`.\r\n\r\n\r\nContributing\r\n------------\r\nIf you would like to contribute, you can do it the GitHub way by opening\r\nissues or pull requests. To see where help is needed, check the \r\n[implementation status document](https://github.com/thekid/xp-js/blob/master/docs/status.md)\r\n\r\n\r\n* * *\r\n\r\n\r\n**Happy hacking!**\r\n","tagline":"XP on JavaScript","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}